Reproject raster data to GDA94
========================================================

This script opens ascii files and converts them to the same extent, projection and resolution as a selected file for the use in  Maxent and Zonation analyses.  

In this case, we are converting to GDA94_Zone56 with a resolution of 100m clipped to the extent of the Hunter Central Rivers/Hawkesberry-Nepean/Sydney Metro CMA boundaries.  Note that this script doesn't run super fast but it gets the job done without having to click lots of buttons in ArcView which is nice!

The projection data is taken from here[http://spatialreference.org/]


```{r message=FALSE}
#load packages and set working directory
rm(list=ls())
start.time <- proc.time()
packages(raster)
packages(rgdal)
setwd("C:/Users/awhitehead/Documents/GIS data/Hunter/environment/environment clipped by cma")

# open the selected sample file
  cma_mask <- readGDAL("cma_mask")
  cma_mask <- raster(cma_mask)
  plot(cma_mask)

# definition of the projection we are dealing with (from)
  GDA94_zone56 <- CRS("+proj=utm +zone=56 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs")

# function that opens an input raster, converts it to match the example raster and saves it in the specified folder
 convert.raster <- function (input.raster, input.projection, example.raster) {
   require(raster)   
   r <- readGDAL(input.raster)
      r <- raster(r)
#     projection(r) <- input.projection
      # convert r to the same extent, projection and resolution as the sample raster
      r <- resample(r,example.raster, method="bilinear")
      names(r) <- input.raster
      # save the new raster to the specified directory
      writeRaster(r,glue("data for analysis/",input.raster,".asc"), overwrite=TRUE)
      plot(r)
      print(input.raster)
 }

# list of parameters that we want to standardise for analyses
  parameters<-c("tot01_temp","tot11_cold","tot12_rain","tot20_solar","fert")

# loop through each raster in the parameter list 
  for(i in seq(parameters)) {
    convert.raster(parameters[i],GDA94_proj,sample.raster)
  }

  cat("/n","This conversion of ",length(parameters), "rasters took", round((proc.time()-start.time)[3]/60,2), "minutes")

```

**Note 1:** Opening the sample ascii file using readGDAL will also open the associated prj file.  However, we can't save prj for the exported ascii files.  This won't matter for the pupose of this exercise but might be something to investigate further at some point. 

**Note 2:** For some reason readGDAL can't be found when you try and run this file using *knitr*.  However, it works fine as a straight *R* file.  Not really sure what is going on here but it seems to work okay, so should just leave it as it is for now.

*This file was last updated on 26 February 2013 and last run on `r format(Sys.time(), "%d %B %Y")`.*